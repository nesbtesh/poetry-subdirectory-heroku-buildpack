#!/bin/sh

BUILD_DIR=$1
CACHE_DIR=$2
ENV_DIR=$3

indent() {
  sed -u 's/^/       /'
}

echo "-----> Copying Python Clock Poetry Requirements"

# Create cache directories if they don't exist
mkdir -p $CACHE_DIR/poetry
mkdir -p $CACHE_DIR/pip

# Export cache directories to environment
export POETRY_CACHE_DIR=$CACHE_DIR/poetry
export PIP_CACHE_DIR=$CACHE_DIR/pip

# Copy only the necessary Poetry files
echo "-----> Copying Poetry configuration files from apps/clock" | indent
cp "$BUILD_DIR/apps/clock/pyproject.toml" "$BUILD_DIR/"
cp "$BUILD_DIR/apps/clock/poetry.lock" "$BUILD_DIR/"
cp "$BUILD_DIR/apps/clock/.python-version" "$BUILD_DIR/"

echo "-----> Poetry files copied successfully" 